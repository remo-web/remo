(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"0uxT":function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("OgeD").run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),r=i("10Js");function a(){o.call(this,r.ServerDavModuleName),this.davServer=n.observable(r.ExternalHostNameOfDAVServer)}s.extendOwn(a.prototype,o.prototype),a.prototype.ViewTemplate="MobileSyncWebclient_DavAdminSettingsView",a.prototype.getCurrentValues=function(){return[this.davServer()]},a.prototype.revertGlobalValues=function(){this.davServer(r.ExternalHostNameOfDAVServer)},a.prototype.getParametersForSave=function(){return{ExternalHostNameOfDAVServer:this.davServer()}},a.prototype.applySavedValues=function(t){r.update(t.ExternalHostNameOfDAVServer)},a.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new a},"10Js":function(t,e,i){"use strict";var s=i("F/us"),n=i("AFLV");t.exports={ServerModuleName:"MobileSync",HashModuleName:"mobilesync",ServerDavModuleName:"Dav",ExternalHostNameOfDAVServer:"",init:function(t){var e=t[this.ServerDavModuleName];s.isEmpty(e)||(this.ExternalHostNameOfDAVServer=n.pString(e.ExternalHostNameOfDAVServer,this.ExternalHostNameOfDAVServer))},update:function(t){this.ExternalHostNameOfDAVServer=t}}},"4iw0":function(t,e,i){"use strict";var s=i("F/us"),n=i("AFLV"),o=i("hPb3"),r=i("yYIs");function a(){r.call(this,o.ServerModuleName),this.sVersion=n.pString(o.Version),this.sProductName=n.pString(o.ProductName)}s.extendOwn(a.prototype,r.prototype),a.prototype.ViewTemplate="AdminPanelWebclient_AboutAdminSettingsView",a.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new a},"61ci":function(t,e,i){"use strict";var s=i("F/us"),n=i("AFLV");t.exports={ServerModuleName:"Core",HashModuleName:"admin",EntitiesPerPage:20,TabsOrder:["licensing","admin-security","admin-db","logs-viewer","system","common","modules"],EntitiesOrder:[],EnableMultiTenant:!1,init:function(t){var e=t.AdminPanelWebclient,i=t.Core;s.isEmpty(e)||(this.EntitiesPerPage=n.pPositiveInt(e.EntitiesPerPage,this.EntitiesPerPage),this.TabsOrder=n.pArray(e.TabsOrder,this.TabsOrder),this.EntitiesOrder=n.pArray(e.EntitiesOrder,this.EntitiesOrder)),s.isEmpty(i)||(this.EnableMultiTenant=n.pBool(i.EnableMultiTenant,this.EnableMultiTenant))}}},"6ZXr":function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("AFLV");t.exports={ServerModuleName:"Dropbox",HashModuleName:"dropbox",Connected:!1,EnableModule:!1,Id:"",Secret:"",Scopes:[],init:function(t){var e=t.Dropbox;s.isEmpty(e)||(this.Connected=o.pBool(e.Connected,this.Connected),this.EnableModule=o.pBool(e.EnableModule,this.EnableModule),this.Id=o.pString(e.Id,this.Id),this.Secret=o.pString(e.Secret,this.Secret),this.Scopes=o.pArray(e.Scopes,this.Scopes))},getScopesCopy:function(){var t=[];return s.each(this.Scopes,(function(e){t.push({Description:e.Description,Name:e.Name,Value:n.observable(e.Value)})})),t},updateScopes:function(t,e){var i=[];s.each(e,(function(t){i.push({Description:t.Description,Name:t.Name,Value:t.Value()})})),this.Connected=t,this.Scopes=i},updateAdmin:function(t,e,i,s){this.EnableModule=t,this.Id=e,this.Secret=i,this.Scopes=s}}},"7vIj":function(t,e,i){"use strict";var s=i("0h2I"),n=i("IAk5");t.exports={ServerModuleName:"StandardAuth",HashModuleName:"standardauth",userAccountsCount:s.observable(0),accountsEmails:s.observableArray([]),init:function(t){n.registerUserAccountsCount(this.userAccountsCount),n.registerAccountsWithPass(this.accountsEmails)}}},"9nLz":function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("RN+F"),r=i("OgeD"),a=i("SQrT"),u=r.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i("vF2m");function c(){u.call(this,h.ServerModuleName),this.enable=n.observable(h.EnableModule),this.id=n.observable(h.Id),this.secret=n.observable(h.Secret),this.key=n.observable(h.Key),this.scopes=n.observable(h.getScopesCopy())}s.extendOwn(c.prototype,u.prototype),c.prototype.ViewTemplate="Google_AdminSettingsView",c.prototype.getCurrentValues=function(){var t=s.map(this.scopes(),(function(t){return t.Name+t.Value()}));return[this.enable(),this.id(),this.secret(),this.key(),t]},c.prototype.revertGlobalValues=function(){this.enable(h.EnableModule),this.id(h.Id),this.secret(h.Secret),this.key(h.Key),this.scopes(h.getScopesCopy())},c.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()&&""!==this.key()||(a.showError(o.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},c.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Key:this.key(),Scopes:s.map(this.scopes(),(function(t){return{Name:t.Name,Description:t.Description,Value:t.Value()}}))}},c.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableModule,t.Id,t.Secret,t.Key,t.Scopes)},c.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new c},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},BRgg:function(t,e,i){"use strict";var s=i("F/us"),n=i("EVdn"),o=i("0h2I"),r=i("RN+F"),a=i("SQrT"),u=i("hPb3"),h=i("mrHt"),c=i("yYIs"),l=i("76Kh"),p=i("1grR"),d=i("20Ah");function E(){c.call(this,u.ServerModuleName),this.sFakePass="xxxxxxxxxx",this.dbLogin=o.observable(u.DbLogin),this.dbPassword=o.observable(this.sFakePass),this.dbName=o.observable(u.DbName),this.dbHost=o.observable(u.DbHost),this.startError=o.observable(""),this.setStartError()}s.extendOwn(E.prototype,c.prototype),E.prototype.ViewTemplate="AdminPanelWebclient_DbAdminSettingsView",E.prototype.setStartError=function(){this.startError(""===u.DbLogin||""===u.DbName||""===u.DbHost?r.i18n("ADMINPANELWEBCLIENT/ERROR_DB_ACCESS"):"")},E.prototype.getStartError=function(){return this.startError},E.prototype.getCurrentValues=function(){return[this.dbLogin(),this.dbPassword(),this.dbName(),this.dbHost()]},E.prototype.revertGlobalValues=function(){this.dbLogin(u.DbLogin),this.dbPassword(this.sFakePass),this.dbName(u.DbName),this.dbHost(u.DbHost)},E.prototype.getParametersForSave=function(){return this.dbPassword()===this.sFakePass?{DbLogin:n.trim(this.dbLogin()),DbName:n.trim(this.dbName()),DbHost:n.trim(this.dbHost())}:{DbLogin:n.trim(this.dbLogin()),DbPassword:n.trim(this.dbPassword()),DbName:n.trim(this.dbName()),DbHost:n.trim(this.dbHost())}},E.prototype.applySavedValues=function(t){u.StoreAuthTokenInDB&&l.showPopup(p,[r.i18n("ADMINPANELWEBCLIENT/INFO_AUTHTOKEN_DB_STORED")]),u.updateDb(t.DbLogin,t.DbName,t.DbHost),this.setStartError()},E.prototype.setAccessLevel=function(t,e){this.visible(""===t)},E.prototype.testConnection=function(){h.send("TestDbConnection",this.getParametersForSave(),(function(t){t.Result?a.showReport(r.i18n("ADMINPANELWEBCLIENT/REPORT_DB_CONNECT_SUCCESSFUL")):a.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_DB_CONNECT_FAILED"))}),this)},E.prototype.createTables=function(){var t=function(){h.send("CreateTables",null,(function(t){t.Result?a.showReport(r.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_TABLES_SUCCESSFUL")):a.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_TABLES_FAILED"))}))};this.sSavedState!==this.getCurrentState()?l.showPopup(d,[r.i18n("ADMINPANELWEBCLIENT/CONFIRM_SAVE_CHANGES_BEFORE_CREATE_TABLES"),s.bind((function(e){if(e){var i=this.isSaving.subscribe((function(e){e||(t(),i.dispose())}),this);this.save()}}),this)]):t()},E.prototype.updateConfig=function(){h.send("UpdateConfig",null,(function(t){t.Result?a.showReport(r.i18n("ADMINPANELWEBCLIENT/REPORT_UPDATE_CONFIG_SUCCESSFUL")):a.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_UPDATE_CONFIG_FAILED"))}))},t.exports=new E},DnLV:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("AFLV"),r=i("o0Bx"),a=i("IAk5"),u=i("OgeD").run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i("Jq2H");function c(){u.call(this,h.ServerModuleName),this.sEntityType="",this.iEntityId=0,this.isNoEntity=n.observable(!1),this.isTenantEntity=n.observable(!1),this.isUserEntity=n.observable(!1),this.allowEditUserSpaceLimitMb=n.observable(!0),this.allowEditTenantSpaceLimitMb=n.observable(!0),this.allocatedSpace=n.observable(0),this.enableUploadSizeLimit=n.observable(h.EnableUploadSizeLimit),this.uploadSizeLimitMb=n.observable(h.UploadSizeLimitMb),this.userSpaceLimitMb=n.observable(h.UserSpaceLimitMb),this.tenantSpaceLimitMb=n.observable(h.TenantSpaceLimitMb)}s.extendOwn(c.prototype,u.prototype),c.prototype.ViewTemplate="FilesWebclient_FilesAdminSettingsView",c.prototype.getCurrentValues=function(){return[this.enableUploadSizeLimit(),this.uploadSizeLimitMb()]},c.prototype.clearFields=function(){},c.prototype.revertGlobalValues=function(){this.enableUploadSizeLimit(h.EnableUploadSizeLimit),this.uploadSizeLimitMb(h.UploadSizeLimitMb),this.userSpaceLimitMb(h.UserSpaceLimitMb),this.tenantSpaceLimitMb(h.TenantSpaceLimitMb)},c.prototype.getParametersForSave=function(){return{EnableUploadSizeLimit:this.enableUploadSizeLimit(),UploadSizeLimitMb:o.pInt(this.uploadSizeLimitMb())}},c.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableUploadSizeLimit,t.UploadSizeLimitMb)},c.prototype.setAccessLevel=function(t,e){this.sEntityType=t,this.iEntityId="User"===t||"Tenant"===t?e:0,this.visible(""===t||"Tenant"===t||"User"===t),this.isNoEntity(""===t),this.isTenantEntity("Tenant"===t),this.isUserEntity("User"===t)},c.prototype.onRouteChild=function(t){"Tenant"!==this.sEntityType&&"User"!==this.sEntityType||(this.requestPerEntitytSettings(),this.allowEditTenantSpaceLimitMb(a.getUserRole()===Enums.UserRole.SuperAdmin))},c.prototype.requestPerEntitytSettings=function(){o.isPositiveNumber(this.iEntityId)?(this.clearFields(),r.send(h.ServerModuleName,"GetSettingsForEntity",{EntityType:this.sEntityType,EntityId:this.iEntityId},(function(t){t.Result&&(this.userSpaceLimitMb(o.pInt(t.Result.UserSpaceLimitMb)),this.tenantSpaceLimitMb(o.pInt(t.Result.TenantSpaceLimitMb)),void 0!==t.Result.AllowEditUserSpaceLimitMb&&this.allowEditUserSpaceLimitMb(o.pBool(t.Result.AllowEditUserSpaceLimitMb)),void 0!==t.Result.AllocatedSpace&&this.allocatedSpace(o.pInt(t.Result.AllocatedSpace)),this.updateSavedState())}),this)):this.revertGlobalValues()},c.prototype.savePersonal=function(){s.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),r.send(this.sServerModule,"UpdateSettingsForEntity",{EntityType:this.sEntityType,EntityId:o.pInt(this.iEntityId),UserSpaceLimitMb:o.pInt(this.userSpaceLimitMb()),TenantSpaceLimitMb:o.pInt(this.tenantSpaceLimitMb())},this.onResponse,this))},c.prototype.applySavedValues=function(t){void 0!==t.EntityType&&""===t.EntityType&&void 0!==t.UserSpaceLimitMb&&void 0!==t.TenantSpaceLimitMb&&(h.UserSpaceLimitMb=t.UserSpaceLimitMb,h.TenantSpaceLimitMb=t.TenantSpaceLimitMb)},t.exports=new c},Jq2H:function(t,e,i){"use strict";i("0h2I");var s=i("F/us"),n=i("AFLV");t.exports={ServerModuleName:"Files",CorporateServerModuleName:"CorporateFiles",PersonalServerModuleName:"PersonalFiles",HashModuleName:"files",CustomTabTitle:"",Storages:[],EnableUploadSizeLimit:!1,PublicFolderName:"",PublicHash:"",UploadSizeLimitMb:0,UserSpaceLimitMb:0,TenantSpaceLimitMb:0,CorporateSpaceLimitMb:0,EditFileNameWithoutExtension:!1,ShowCommonSettings:!0,ShowFilesApps:!0,BottomLeftCornerLinks:[],ShowPersonalFilesAdminSection:!1,ShowCorporateFilesAdminSection:!1,init:function(t){var e=t[this.ServerModuleName],i=t[this.CorporateServerModuleName],o=t.FilesWebclient;s.isEmpty(e)||(this.CustomTabTitle=n.pString(e.CustomTabTitle,this.CustomTabTitle),this.Storages=n.pArray(e.Storages,this.Storages),this.EnableUploadSizeLimit=n.pBool(e.EnableUploadSizeLimit,this.EnableUploadSizeLimit),this.PublicFolderName=n.pString(e.PublicFolderName,this.PublicFolderName),this.PublicHash=n.pString(e.PublicHash,this.PublicHash),this.UploadSizeLimitMb=n.pNonNegativeInt(e.UploadSizeLimitMb,this.UploadSizeLimitMb),this.UserSpaceLimitMb=n.pNonNegativeInt(e.UserSpaceLimitMb,this.UserSpaceLimitMb),this.TenantSpaceLimitMb=n.pNonNegativeInt(e.TenantSpaceLimitMb,this.TenantSpaceLimitMb)),this.ShowPersonalFilesAdminSection=!0,s.isEmpty(i)||(this.ShowCorporateFilesAdminSection=!0,this.CorporateSpaceLimitMb=n.pNonNegativeInt(i.SpaceLimitMb,this.CorporateSpaceLimitMb)),s.isEmpty(o)||(this.EditFileNameWithoutExtension=n.pBool(o.EditFileNameWithoutExtension,this.EditFileNameWithoutExtension),this.ShowCommonSettings=n.pBool(o.ShowCommonSettings,this.ShowCommonSettings),this.ShowFilesApps=n.pBool(o.ShowFilesApps,this.ShowFilesApps),this.BottomLeftCornerLinks=n.pArray(o.BottomLeftCornerLinks,this.BottomLeftCornerLinks))},updateAdmin:function(t,e){this.EnableUploadSizeLimit=t,this.UploadSizeLimitMb=e},updateAdminPersonal:function(t){this.PersonalSpaceLimitMb=t},updateAdminCorporate:function(t){this.CorporateSpaceLimitMb=t}}},"KSC/":function(t,e,i){"use strict";var s=i("F/us"),n=i("EVdn"),o=i("0h2I"),r=i("9oTK"),a=i("RN+F"),u=i("AFLV"),h=i("IAk5"),c=i("SQrT"),l=i("QaF5"),p=i("xcwT"),d=i("YUUU"),E=i("pvQt"),S=i("TAkd"),b=i("61ci"),g=i("o0Wm");function T(){p.call(this,"AdminPanelWebclient"),this.tenants=E.tenants,this.selectedTenant=E.selectedTenant,this.currentEntityType=o.observable(""),this.currentEntitiesId=o.observable({}),this.lastSavedEntitiesId=o.observable({}),this.showTenantsSelector=o.computed((function(){return b.EnableMultiTenant&&this.tenants().length>1}),this),this.bShowLogout=h.getUserRole()===Enums.UserRole.SuperAdmin,this.aScreens=[],h.getUserRole()===Enums.UserRole.SuperAdmin&&this.aScreens.push({linkHash:o.observable(l.buildHashFromArray(d.get(""))),sLinkText:a.i18n("ADMINPANELWEBCLIENT/HEADING_SYSTEM_SETTINGS_TABNAME"),sType:"",oView:null}),s.each(S.getData(),s.bind((function(t){var e=new g(t.Type),i=s.bind((function(t,e,i){if("create"===i)this.openCreateEntity();else if(t===this.currentEntityType())this.changeEntity(t,e,i||"");else{var n=s.clone(this.currentEntitiesId());u.isNumber(e)?t&&(n[t]=e,delete n[this.currentEntityType()]):n[t]&&delete n[t],l.replaceHash(d.get(this.currentEntityType(),n,""))}}),this);e.setChangeEntityHandler(i),this.aScreens.push({linkHash:o.computed((function(){var e=s.clone(this.lastSavedEntitiesId());return s.extend(e,this.currentEntitiesId()),l.buildHashFromArray(d.get(t.Type,e))}),this),sLinkText:a.i18n(t.LinkTextKey),sType:t.Type,oView:e})}),this)),this.currentEntitiesView=o.computed((function(){var t=this.currentEntityType(),e=s.find(this.aScreens,(function(e){return e.sType===t}));return e?e.oView:null}),this),this.currentEntitiesView.subscribe((function(){this.currentEntitiesView()&&this.currentEntitiesView().onHide()}),this,"beforeChange"),this.currentEntitiesView.subscribe((function(){this.currentEntitiesView()&&this.currentEntitiesView().onShow()}),this),this.tabs=o.observableArray([]),this.visibleTabsCount=o.computed((function(){var t=0;return s.each(this.tabs(),(function(e){e.view&&(void 0===e.view.visible||e.view.visible())&&t++})),t}),this),this.showModulesTabs=o.computed((function(){return""===this.currentEntityType()||this.currentEntitiesView().hasSelectedEntity()}),this),this.currentTab=o.observable(null),this.aStartErrors=[],h.subscribeEvent("SendAjaxRequest::before",this.onAjaxSend.bind(this)),h.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}s.extendOwn(T.prototype,p.prototype),T.prototype.ViewTemplate="AdminPanelWebclient_SettingsView",T.prototype.ViewConstructorName="CSettingsView",T.prototype.onAjaxSend=function(t){""===this.currentEntityType()||t.Parameters.TenantId||(t.Parameters.TenantId=E.selectedTenantId())},T.prototype.selectTenant=function(t){var e=s.clone(this.currentEntitiesId());e.Tenant=t,l.setHash(d.get(this.currentEntityType(),e))},T.prototype.registerTab=function(t,e,i){if(s.isFunction(t)){var n=this.tabs;return new r(t).then((function(t){n.push({view:t,name:e,title:i})}),(function(t){console.log("failed to load settings tab",t)}))}return!1},T.prototype.sortRegisterTabs=function(){this.tabs(s.sortBy(this.tabs(),(function(t){var e=s.indexOf(b.TabsOrder,t.name);return-1!==e?e:b.TabsOrder.length})))},T.prototype.registerTabSection=function(t,e){var i=s.findWhere(this.tabs(),{name:e}),n=t();i&&i.view.addSettingsSection(n)},T.prototype.cancelCreatingEntity=function(){l.setHash(d.get(this.currentEntityType(),this.currentEntitiesId(),""))},T.prototype.openCreateEntity=function(){if(S.getEntityData(this.currentEntityType()).CreateRequest){var t=s.clone(this.currentEntitiesId());delete t[this.currentEntityType()],"Tenant"!==this.currentEntityType()&&!t.Tenant&&E.selectedTenantId()&&(t.Tenant=E.selectedTenantId()),l.setHash(d.get(this.currentEntityType(),t,"create"))}},T.prototype.changeEntity=function(t,e,i){var n=s.clone(this.currentEntitiesId()),o=!!s.find(this.tabs(),(function(t){return t.name===i})),r=this.currentTab()?this.currentTab().name:"";t&&(n[t]=e),"Tenant"!==t&&E.selectedTenantId()&&(n.Tenant=E.selectedTenantId()),l.setHash(d.get(t,n,o?i:r))},T.prototype.onBind=function(){s.each(this.tabs(),s.bind((function(t){if(t.view&&s.isFunction(t.view.getStartError)){var e=t.view.getStartError();s.isFunction(e)&&(e.subscribe((function(){this.showStartError()}),this),this.aStartErrors.push(e))}}),this)),this.showStartError()},T.prototype.showStartError=function(){var t=[];s.each(this.aStartErrors,(function(e){var i=e();""!==i&&t.push(i)})),c.showError(t.join("<br /><br />"),!0)},T.prototype.onRoute=function(t){var e=d.parse(t);if(!s.find(this.aScreens,(function(t){return t.sType===e.CurrentType}))&&this.aScreens.length>0)l.replaceHash(d.get(this.aScreens[0].sType,[],""));else{var i=t.slice(1),o=this.currentEntityType()===e.CurrentType,r=this.currentEntitiesId()[e.CurrentType]===e.Entities[e.CurrentType],a=this.currentTab()&&this.currentTab().name===e.Last,u=JSON.stringify(this.currentEntitiesId())===JSON.stringify(e.Entities),h=this.currentTab(),c=s.bind((function(){this.showNewScreenView(e),this.showNewTabView(e.Last,i)}),this),p=s.bind((function(){h&&l.replaceHashDirectly(d.get(this.currentEntityType(),this.currentEntitiesId(),this.currentTab()?this.currentTab().name:""))}),this);o&&r&&a&&u?h&&h.view.onRoute(i,this.currentEntitiesId()):h&&n.isFunction(h.view.hide)?h.view.hide(c,p):c()}},T.prototype.showNewScreenView=function(t){var e=s.find(this.aScreens,(function(e){return e.sType===t.CurrentType}));if(this.currentEntityType(t.CurrentType),this.currentEntitiesId(t.Entities),s.isEmpty(t.Entities)||this.lastSavedEntitiesId(t.Entities),E.setSelectedTenant(t.Entities.Tenant),e&&e.oView){var i=e.oView.oEntityData?e.oView.oEntityData.CreateRequest:"";"create"===t.Last&&u.isNonEmptyString(i)?e.oView.openCreateForm():e.oView.cancelCreatingEntity(),e.oView.changeEntity(t.Entities[t.CurrentType],t.Entities)}},T.prototype.showNewTabView=function(t,e){s.each(this.tabs(),s.bind((function(t){t.view&&s.isFunction(t.view.setAccessLevel)&&t.view.setAccessLevel(this.currentEntityType(),this.currentEntitiesId()[this.currentEntityType()])}),this));var i=s.find(this.tabs(),(function(e){return e.name===t}));i&&i.view&&i.view.visible()||(i=s.find(this.tabs(),(function(t){return t.view&&t.view.visible()}))),i&&(n.isFunction(i.view.onRoute)&&i.view.onRoute(e,this.currentEntitiesId()),this.currentTab(i))},T.prototype.changeTab=function(t){var e=this.currentEntityType()?this.currentEntitiesId():{};l.setHash(d.get(this.currentEntityType(),e,t))},T.prototype.logout=function(){h.logout()},T.prototype.deleteCurrentEntity=function(){this.currentEntitiesView()&&this.currentEntitiesView().deleteCurrentEntity()},T.prototype.setAddHash=function(t){l.setHash(s.union([b.HashModuleName,this.currentTab()?this.currentTab().name:""],t))},t.exports=new T},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},QrcW:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("AFLV"),r=i("o0Bx"),a=i("IAk5"),u=i("SQrT"),h=i("TAkd"),c=i("yYIs");function l(){c.call(this),this.type=n.observable("User"),this.id=n.observable(0),this.entityCreateView=n.computed((function(){var t=h.getEditView(this.type());return t&&(s.isFunction(t.updateSavedState)||(t.updateSavedState=this.updateSavedState.bind(this)),s.isFunction(t.setRequestEntityDataFunction)&&t.setRequestEntityDataFunction(this.requestEntityData.bind(this))),t}),this),this.entityCreateView.subscribe((function(){this.updateSavedState()}),this),this.entityData=n.computed((function(){return h.getEntityData(this.type())}),this),this.allowSave=n.computed((function(){return!!this.entityData()&&!!this.entityData().UpdateRequest}),this),this.allowDelete=n.computed((function(){var t=this.entityData(),e=this.entityCreateView()&&s.isFunction(this.entityCreateView().id)?this.entityCreateView().id():0,i=t?t.Type:"",n="User"===i&&e===a.getUserId()||"Tenant"===i&&e===a.getTenantId();return!(!t||!t.DeleteRequest||n)}),this),this.updateSavedState()}s.extendOwn(l.prototype,c.prototype),l.prototype.ViewTemplate="AdminPanelWebclient_CommonSettingsPaneView",l.prototype.getCurrentValues=function(){return this.entityCreateView()?this.entityCreateView().getCurrentValues():[]},l.prototype.revertGlobalValues=function(){this.entityCreateView()&&this.entityCreateView().clearFields(),this.updateSavedState()},l.prototype.save=function(t){this.entityData().UpdateRequest&&this.entityCreateView()&&o.isPositiveNumber(this.id())&&(!s.isFunction(this.entityCreateView().isValidSaveData)||this.entityCreateView().isValidSaveData())&&r.send(this.entityData().ServerModuleName,this.entityData().UpdateRequest,this.entityCreateView()?this.entityCreateView().getParametersForSave():{},(function(e){e.Result?s.isFunction(this.entityCreateView().showAdvancedReport)?this.entityCreateView().showAdvancedReport(this.entityData().ReportSuccessUpdate,e):u.showReport(this.entityData().ReportSuccessUpdate):u.showError(this.entityData().ErrorUpdate),t&&s.isFunction(t.currentEntitiesView)&&s.isFunction(t.currentEntitiesView().requestEntities)&&t.currentEntitiesView().requestEntities(),this.updateSavedState()}),this)},l.prototype.requestEntityData=function(){o.isPositiveNumber(this.id())&&r.send(this.entityData().ServerModuleName,this.entityData().GetRequest,{Type:this.type(),Id:this.id()},(function(t,e){this.id()===e.Parameters.Id&&(this.entityCreateView()&&this.entityCreateView().parse(this.id(),t.Result||{}),this.updateSavedState())}),this)},l.prototype.setAccessLevel=function(t,e){this.visible(""!==t),this.type(t),this.id(o.pInt(e)),o.isPositiveNumber(this.id())?this.requestEntityData():this.updateSavedState()},l.prototype.onRoute=function(t,e){s.isFunction(this.entityCreateView().onRoute)&&this.entityCreateView().onRoute(t,e),a.broadcastEvent("CCommonSettingsPaneView::onRoute::after",{View:this.entityCreateView(),Id:this.id()})},t.exports=new l},SBlY:function(t,e,i){"use strict";var s=i("o0Bx"),n=i("7vIj");t.exports={send:function(t,e,i,o){s.send(n.ServerModuleName,t,e,i,o)}}},TAkd:function(t,e,i){"use strict";var s=i("F/us"),n=i("RN+F"),o=i("61ci");function r(){this.aData=[],o.EnableMultiTenant&&this.aData.push({Type:"Tenant",ScreenHash:"tenants",LinkTextKey:"ADMINPANELWEBCLIENT/HEADING_TENANTS_SETTINGS_TABNAME",EditView:i("yF5f"),ServerModuleName:o.ServerModuleName,GetListRequest:"GetTenants",GetRequest:"GetTenant",CreateRequest:"CreateTenant",UpdateRequest:"UpdateTenant",DeleteRequest:"DeleteTenants",NoEntitiesFoundText:n.i18n("ADMINPANELWEBCLIENT/INFO_NO_ENTITIES_FOUND_TENANT"),ActionCreateText:n.i18n("ADMINPANELWEBCLIENT/ACTION_CREATE_ENTITY_TENANT"),ReportSuccessCreateText:n.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_ENTITY_TENANT"),ErrorCreateText:n.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_ENTITY_TENANT"),CommonSettingsHeadingText:n.i18n("COREWEBCLIENT/HEADING_COMMON_SETTINGS"),ReportSuccessUpdate:n.i18n("ADMINPANELWEBCLIENT/REPORT_UPDATE_ENTITY_TENANT"),ErrorUpdate:n.i18n("ADMINPANELWEBCLIENT/ERROR_UPDATE_ENTITY_TENANT"),ActionDeleteText:n.i18n("ADMINPANELWEBCLIENT/ACTION_DELETE_TENANT"),ConfirmDeleteLangConst:"ADMINPANELWEBCLIENT/CONFIRM_DELETE_TENANT_PLURAL",ReportSuccessDeleteLangConst:"ADMINPANELWEBCLIENT/REPORT_DELETE_ENTITIES_TENANT_PLURAL",ErrorDeleteLangConst:"ADMINPANELWEBCLIENT/ERROR_DELETE_ENTITIES_TENANT_PLURAL"}),this.aData.push({Type:"User",ScreenHash:"users",LinkTextKey:"ADMINPANELWEBCLIENT/HEADING_USERS_SETTINGS_TABNAME",EditView:i("qdYY"),ServerModuleName:o.ServerModuleName,GetListRequest:"GetUsers",GetRequest:"GetUser",CreateRequest:"CreateUser",UpdateRequest:"UpdateUser",DeleteRequest:"DeleteUsers",NoEntitiesFoundText:n.i18n("ADMINPANELWEBCLIENT/INFO_NO_ENTITIES_FOUND_USER"),ActionCreateText:n.i18n("ADMINPANELWEBCLIENT/ACTION_CREATE_ENTITY_USER"),ReportSuccessCreateText:n.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_ENTITY_USER"),ErrorCreateText:n.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_ENTITY_USER"),CommonSettingsHeadingText:n.i18n("COREWEBCLIENT/HEADING_COMMON_SETTINGS"),ReportSuccessUpdate:n.i18n("ADMINPANELWEBCLIENT/REPORT_UPDATE_ENTITY_USER"),ErrorUpdate:n.i18n("ADMINPANELWEBCLIENT/ERROR_UPDATE_ENTITY_USER"),ActionDeleteText:n.i18n("ADMINPANELWEBCLIENT/ACTION_DELETE_USER"),ConfirmDeleteLangConst:"ADMINPANELWEBCLIENT/CONFIRM_DELETE_USER_PLURAL",ReportSuccessDeleteLangConst:"ADMINPANELWEBCLIENT/REPORT_DELETE_ENTITIES_USER_PLURAL",ErrorDeleteLangConst:"ADMINPANELWEBCLIENT/ERROR_DELETE_ENTITIES_USER_PLURAL"}),this.sortEntitiesData()}r.prototype.getData=function(){return this.aData},r.prototype.getEntityData=function(t){return s.find(this.aData,(function(e){return e.Type===t}))},r.prototype.getEditView=function(t){var e=this.getEntityData(t);return e?e.EditView:null},r.prototype.registerEntityType=function(t){this.aData.push(t),this.sortEntitiesData()},r.prototype.sortEntitiesData=function(){this.aData=s.sortBy(this.aData,(function(t){var e=s.indexOf(o.EntitiesOrder,t.Type);return-1!==e?e:o.EntitiesOrder.length}))},r.prototype.changeEntityData=function(t){var e=this.getEntityData(t.Type);e&&s.each(t,(function(t,i){e[i]=t}))},t.exports=new r},XjIm:function(t,e,i){"use strict";var s=i("F/us"),n=i("AFLV");t.exports={ServerModuleName:"LogsViewerWebclient",HashModuleName:"logs-viewer",EnableLogging:!1,EnableEventLogging:!1,LoggingLevel:0,LogSizeBytes:0,EventLogSizeBytes:0,LogFileName:"",EventLogFileName:"",ViewLastLogSize:0,init:function(t){var e=t.Core,i=t[this.ServerModuleName];s.isEmpty(e)||(this.ViewLastLogSize=i.ViewLastLogSize,this.ELogLevel=n.pObject(e.ELogLevel),this.EnableLogging=n.pBool(e.EnableLogging),this.EnableEventLogging=n.pBool(e.EnableEventLogging),this.LoggingLevel=n.pEnum(e.LoggingLevel,this.ELogLevel,this.LoggingLevel),this.updateLogsData(n.pObject(e.LogFilesData)))},updateLogging:function(t,e,i){this.EnableLogging=!!t,this.EnableEventLogging=!!e,this.LoggingLevel=n.pInt(i)},updateLogsData:function(t){this.LogSizeBytes=n.pInt(t.LogSizeBytes),this.EventLogSizeBytes=n.pInt(t.EventLogSizeBytes),this.LogFileName=n.pString(t.LogFileName),this.EventLogFileName=n.pString(t.EventLogFileName)}}},YUUU:function(t,e,i){"use strict";var s=i("F/us"),n=i("AFLV"),o=i("TAkd"),r=i("61ci"),a="s.",u="p.",h={};h.get=function(t,e,i,h,c){var l=[r.HashModuleName],p=!0;return e=e||[],s.each(o.getData(),(function(i){p&&(n.isPositiveNumber(e[i.Type])?"User"===i.Type&&"MailingList"===t||l.push(i.ScreenHash.substr(0,1)+e[i.Type]):t===i.Type&&l.push(i.ScreenHash),t===i.Type&&(p=!1))})),n.isPositiveNumber(h)&&h>1&&l.push(u+h),n.isNonEmptyString(c)&&l.push(a+c),n.isNonEmptyString(i)&&l.push(i),l},h.parse=function(t){var e=0,i={},r="",h=1,c="",l="";return s.each(o.getData(),(function(s){t[e]&&s.ScreenHash===t[e]&&(r=s.Type,e++),t[e]&&s.ScreenHash.substr(0,1)===t[e].substr(0,1)&&n.pInt(t[e].substr(1))>0&&(i[s.Type]=n.pInt(t[e].substr(1)),r=s.Type,e++),t.length>e&&function(t){return u===t.substr(0,1)&&/^[1-9][\d]*$/.test(t.substr(u.length))}(l=n.pString(t[e]))&&((h=n.pInt(l.substr(u.length)))<=0&&(h=1),e++),t.length>e&&function(t){return a===t.substr(0,a.length)}(l=n.pString(t[e]))&&(c=l.substr(a.length),e++)})),{Entities:i,CurrentType:r,Last:n.isNonEmptyString(t[e])?t[e]:"",Page:h,Search:c}},t.exports=h},fIp0:function(t,e,i){"use strict";var s=i("F/us"),n=i("EVdn"),o=i("0h2I"),r=i("Yjhd"),a=i("IAk5");function u(t,e){this.bShown=!1,this.currentPage=o.observable(1),this.count=o.observable(t),this.perPage=o.observable(e),this.firstPage=o.observable(1),this.lastPage=o.observable(1),this.pagesCount=o.computed((function(){var t=this.perPage()>0?Math.ceil(this.count()/this.perPage()):0;return t>0?t:1}),this),o.computed((function(){var t=20,e=4,i=this.pagesCount(),s=this.currentPage(),n=s,o=s;if(i>1)for(;1<n&&(n--,e--),0!==e&&(i>o&&(o++,e--),0!==e)&&0!==--t;);this.firstPage(n),this.lastPage(o)}),this),this.visibleFirst=o.computed((function(){return this.firstPage()>1}),this),this.visibleLast=o.computed((function(){return this.lastPage()<this.pagesCount()}),this),this.clickPage=s.bind(this.clickPage,this),this.pages=o.computed((function(){var t=this.firstPage(),e=[];if(this.firstPage()<this.lastPage())for(;t<=this.lastPage();t++)e.push({number:t,current:t===this.currentPage(),clickFunc:this.clickPage});return e}),this),a.isMobile()||this.hotKeysBind()}u.prototype.ViewTemplate="CoreWebclient_PageSwitcherView",u.prototype.hotKeysBind=function(){n(document).on("keydown",n.proxy((function(t){if(this.bShown&&!r.isTextFieldFocused()){var e=t.keyCode;t.ctrlKey&&e===Enums.Key.Left?this.clickPreviousPage():t.ctrlKey&&e===Enums.Key.Right&&this.clickNextPage()}}),this))},u.prototype.hide=function(){this.bShown=!1},u.prototype.show=function(){this.bShown=!0},u.prototype.clear=function(){this.currentPage(1),this.count(0)},u.prototype.setCount=function(t){this.count(t),this.currentPage()>this.pagesCount()&&this.currentPage(this.pagesCount())},u.prototype.setPage=function(t,e){this.perPage(e),t>this.pagesCount()?this.currentPage(this.pagesCount()):this.currentPage(t)},u.prototype.clickPage=function(t){var e=t.number;e<1&&(e=1),e>this.pagesCount()&&(e=this.pagesCount()),this.currentPage(e)},u.prototype.clickFirstPage=function(){this.currentPage(1)},u.prototype.clickPreviousPage=function(){var t=this.currentPage()-1;t<1&&(t=1),this.currentPage(t)},u.prototype.clickNextPage=function(){var t=this.currentPage()+1;t>this.pagesCount()&&(t=this.pagesCount()),this.currentPage(t)},u.prototype.clickLastPage=function(){this.currentPage(this.pagesCount())},t.exports=u},iIt5:function(t,e,i){"use strict";var s=i("F/us"),n=i("AFLV");t.exports={ServerModuleName:"BrandingWebclient",HashModuleName:"branding",LoginLogo:"",TabsbarLogo:"",init:function(t){var e=t.BrandingWebclient;s.isEmpty(e)||(this.LoginLogo=n.pString(e.LoginLogo,this.LoginLogo),this.TabsbarLogo=n.pString(e.TabsbarLogo,this.TabsbarLogo))},update:function(t){s.isEmpty(t)||(this.LoginLogo=t.LoginLogo,this.TabsbarLogo=t.TabsbarLogo)}}},ko8N:function(t,e,i){"use strict";var s=i("F/us"),n=i("EVdn"),o=i("0h2I"),r=i("RN+F"),a=i("JFZZ"),u=i("SQrT"),h=i("hPb3"),c=i("yYIs");function l(){c.call(this,h.ServerModuleName),this.aLanguages=h.LanguageList,this.login=o.observable(h.AdminLogin),this.pass=o.observable(""),this.newPass=o.observable(""),this.confirmPass=o.observable(""),this.selectedLanguage=o.observable(h.AdminLanguage),this.passFocused=o.observable(!1),this.newPassFocused=o.observable(!1),this.startError=o.observable(""),this.setStartError()}s.extendOwn(l.prototype,c.prototype),l.prototype.ViewTemplate="AdminPanelWebclient_SecurityAdminSettingsView",l.prototype.setStartError=function(){var t=[];h.AdminHasPassword||t.push(r.i18n("ADMINPANELWEBCLIENT/ERROR_ADMIN_EMPTY_PASSWORD")),h.SaltNotEmpty||t.push(r.i18n("ADMINPANELWEBCLIENT/ERROR_SALT_EMPTY")),this.startError(t.join("<br /><br />"))},l.prototype.getStartError=function(){return this.startError},l.prototype.getCurrentValues=function(){return[this.login(),this.pass(),this.newPass(),this.confirmPass(),this.selectedLanguage()]},l.prototype.revertGlobalValues=function(){this.login(h.AdminLogin),this.pass(""),this.newPass(""),this.confirmPass(""),this.selectedLanguage(h.AdminLanguage)},l.prototype.getParametersForSave=function(){var t={AdminLogin:n.trim(this.login()),Password:n.trim(this.pass()),NewPassword:n.trim(this.newPass())};return this.selectedLanguage()!==h.AdminLanguage&&(t.AdminLanguage=this.selectedLanguage()),t},l.prototype.applySavedValues=function(t){this.selectedLanguage()!==h.AdminLanguage&&window.location.reload(),h.updateSecurity(t.AdminLogin,h.AdminHasPassword||""!==t.NewPassword),this.setStartError()},l.prototype.setAccessLevel=function(t,e){this.visible(""===t)},l.prototype.validateBeforeSave=function(){var t=n.trim(this.pass()),e=n.trim(this.newPass()),i=n.trim(this.confirmPass());return h.AdminHasPassword&&""===t&&""!==e?(u.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_CURRENT_PASSWORD_EMPTY")),this.passFocused(!0),!1):""!==t&&""===e?(u.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_NEW_PASSWORD_EMPTY")),this.newPassFocused(!0),!1):""===t||e===i||(u.showError(r.i18n("COREWEBCLIENT/ERROR_PASSWORDS_DO_NOT_MATCH")),this.newPassFocused(!0),!1)},l.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.pass(""),this.newPass(""),this.confirmPass(""),this.updateSavedState(),this.applySavedValues(i),u.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else a.showErrorByCode(t,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},t.exports=new l},lXfK:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("RN+F"),r=i("OgeD"),a=i("SQrT"),u=r.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i("sJNY");function c(){u.call(this,h.ServerModuleName),this.enable=n.observable(h.EnableModule),this.id=n.observable(h.Id),this.secret=n.observable(h.Secret),this.scopes=n.observable(h.getScopesCopy())}s.extendOwn(c.prototype,u.prototype),c.prototype.ViewTemplate="Facebook_AdminSettingsView",c.prototype.getCurrentValues=function(){var t=s.map(this.scopes(),(function(t){return t.Name+t.Value()}));return[this.enable(),this.id(),this.secret(),t]},c.prototype.revertGlobalValues=function(){this.enable(h.EnableModule),this.id(h.Id),this.secret(h.Secret),this.scopes(h.getScopesCopy())},c.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()||(a.showError(o.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},c.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Scopes:s.map(this.scopes(),(function(t){return{Name:t.Name,Description:t.Description,Value:t.Value()}}))}},c.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableModule,t.Id,t.Secret,t.Scopes)},c.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new c},mrHt:function(t,e,i){"use strict";var s=i("o0Bx"),n=i("61ci");s.registerAbortRequestHandler(n.ServerModuleName,(function(t,e){switch(t.Method){case"GetUsers":return"GetUsers"===e.Method;case"GetTenants":return"GetTenants"===e.Method}return!1})),t.exports={send:function(t,e,i,o){s.send(n.ServerModuleName,t,e,i,o)}}},nIpt:function(t,e,i){"use strict";var s=i("F/us"),n=i("EVdn"),o=i("0h2I"),r=i("uN/E"),a=i("RN+F"),u=i("AFLV"),h=i("o0Bx"),c=i("JFZZ"),l=i("ZCBP"),p=i("hPb3"),d=i("XjIm"),E=i("OgeD").run("AdminPanelWebclient","getAbstractSettingsFormViewClass");function S(){E.call(this,"Core"),this.iViewLogSizeBytes=d.ViewLastLogSize,this.aLevelOptions=[{text:a.i18n("LOGSVIEWERWEBCLIENT/LABEL_LOGGING_DEBUG"),value:Enums.LogLevel.Full},{text:a.i18n("LOGSVIEWERWEBCLIENT/LABEL_LOGGING_WARNINGS"),value:Enums.LogLevel.Warning},{text:a.i18n("LOGSVIEWERWEBCLIENT/LABEL_LOGGING_ERRORS"),value:Enums.LogLevel.Error}],this.logSize=o.observable(d.LogSizeBytes),this.downloadLogText=o.computed((function(){return a.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_DOWNLOAD",{SIZE:a.getFriendlySize(this.logSize())})}),this),this.viewLogText=o.computed((function(){return this.logSize()<this.iViewLogSizeBytes?a.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW"):a.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW_LAST",{SIZE:a.getFriendlySize(this.iViewLogSizeBytes)})}),this),this.eventsLogSize=o.observable(d.EventLogSizeBytes),this.downloadEventsLogText=o.computed((function(){return a.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_DOWNLOAD_EVENTS",{SIZE:a.getFriendlySize(this.eventsLogSize())})}),this),this.viewEventsLogText=o.computed((function(){return this.eventsLogSize()<this.iViewLogSizeBytes?a.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW"):a.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW_LAST",{SIZE:a.getFriendlySize(this.iViewLogSizeBytes)})}),this),this.usersWithSeparateLog=o.observableArray([]),this.enableLogging=o.observable(d.EnableLogging),this.enableEventLogging=o.observable(d.EnableEventLogging),this.loggingLevel=o.observable(d.LoggingLevel)}s.extendOwn(S.prototype,E.prototype),S.prototype.ViewTemplate="LogsViewerWebclient_AdminSettingsView",S.prototype.onRouteChild=function(){this.setUpdateStatusTimer(),""===p.DbLogin||""===p.DbName||""===p.DbHost||h.send(d.ServerModuleName,"GetUsersWithSeparateLog",null,(function(t){t.Result?this.usersWithSeparateLog(s.isArray(t.Result)?t.Result:[]):c.showErrorByCode(t)}),this)},S.prototype.turnOffSeparateLogs=function(){this.usersWithSeparateLog([]),h.send(d.ServerModuleName,"TurnOffSeparateLogs")},S.prototype.clearSeparateLogs=function(){h.send(d.ServerModuleName,"ClearSeparateLogs")},S.prototype.setUpdateStatusTimer=function(){this.bShown&&setTimeout(s.bind((function(){h.send(d.ServerModuleName,"GetLogFilesData",null,(function(t){t.Result&&(d.updateLogsData(t.Result),this.logSize(d.LogSizeBytes),this.eventsLogSize(d.EventLogSizeBytes)),this.setUpdateStatusTimer()}),this)}),this),5e3)},S.prototype.getCurrentValues=function(){return[this.enableLogging(),this.enableEventLogging(),u.pInt(this.loggingLevel())]},S.prototype.revertGlobalValues=function(){this.enableLogging(d.EnableLogging),this.enableEventLogging(d.EnableEventLogging),this.loggingLevel(d.LoggingLevel)},S.prototype.getParametersForSave=function(){return{EnableLogging:this.enableLogging(),EnableEventLogging:this.enableEventLogging(),LoggingLevel:u.pInt(this.loggingLevel())}},S.prototype.applySavedValues=function(t){d.updateLogging(t.EnableLogging,t.EnableEventLogging,t.LoggingLevel)},S.prototype.setAccessLevel=function(t,e){this.visible(""===t)},S.prototype.downloadLog=function(t,e){h.send(d.ServerModuleName,"GetLogFile",{EventsLog:t,PublicId:e||""},(function(i){var s=new Blob([i.ResponseText],{type:"text/plain;charset=utf-8"}),n=""!==u.pString(e)?e+"-":"";r.saveAs(s,t?d.EventLogFileName:n+d.LogFileName)}),this,void 0,{Format:"Raw"})},S.prototype.viewLog=function(t){h.send(d.ServerModuleName,"GetLog",{EventsLog:t},(function(t){if(t.Result){var e=l.open("","view-log");e&&n(e.document.body).html("<pre>"+t.Result+"</pre>")}}),this)},S.prototype.clearLog=function(t){h.send(d.ServerModuleName,"ClearLog",{EventsLog:t},(function(e){e.Result&&(t?this.eventsLogSize(0):this.logSize(0))}),this)},t.exports=new S},o0Wm:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("RN+F"),r=i("AFLV"),a=i("Yjhd"),u=i("o0Bx"),h=i("JFZZ"),c=i("IAk5"),l=i("SQrT"),p=i("fIp0"),d=i("76Kh"),E=i("20Ah"),S=i("pvQt"),b=i("TAkd"),g=i("61ci");function T(t){this.bToolbarDisabled=c.getUserRole()===Enums.UserRole.TenantAdmin&&"Tenant"===t,S.selectedTenantId.subscribe((function(){"Tenant"!==this.sType&&this.requestEntities()}),this),this.sType=t,this.oEntityCreateView=b.getEditView(this.sType),this.oEntityData=b.getEntityData(this.sType),this.sActionCreateText=this.oEntityData.ActionCreateText,this.sNoEntitiesFoundText=this.oEntityData.NoEntitiesFoundText,this.entities=n.observableArray([]),this.aFilters=[],this.initFilters(),this.errorMessage=n.observable(""),this.totalEntitiesCount=n.observable(0),this.current=n.observable(0),this.showCreateForm=n.observable(!1),this.isCreating=n.observable(!1),this.hasSelectedEntity=n.computed((function(){var t=s.map(this.entities(),(function(t){return t.Id}));return-1!==s.indexOf(t,this.current())}),this),this.justCreatedId=n.observable(0),this.fChangeEntityHandler=function(){},n.computed((function(){0===this.justCreatedId()&&!this.showCreateForm()&&!this.hasSelectedEntity()&&this.entities().length>0&&this.fChangeEntityHandler(this.sType,this.entities()[0].Id)}),this).extend({throttle:1}),this.checkedEntities=n.computed((function(){return s.filter(this.entities(),(function(t){return t.checked()}),this)}),this),this.hasCheckedEntities=n.computed((function(){return this.checkedEntities().length>0}),this),this.deleteCommand=a.createCommand(this,this.deleteCheckedEntities,this.hasCheckedEntities),this.selectedCount=n.computed((function(){return this.checkedEntities().length}),this),this.searchValue=n.observable(""),this.newSearchValue=n.observable(""),this.isSearchFocused=n.observable(!1),this.loading=n.observable(!1),this.searchText=n.computed((function(){return o.i18n("ADMINPANELWEBCLIENT/INFO_SEARCH_RESULT",{SEARCH:this.searchValue()})}),this),this.oPageSwitcher=new p(0,g.EntitiesPerPage),this.oPageSwitcher.currentPage.subscribe((function(){this.requestEntities()}),this),this.totalEntitiesCount.subscribe((function(){this.oPageSwitcher.setCount(this.totalEntitiesCount())}),this),this.aIdListDeleteProcess=[],this.aAdditionalButtons=[],this.initAdditionalButtons()}T.prototype.ViewTemplate="AdminPanelWebclient_EntitiesView",T.prototype.CreateFormViewTemplate="AdminPanelWebclient_EntityCreateFormView",T.prototype.onShow=function(){this.bShown=!0,this.requestEntities()},T.prototype.onHide=function(){this.bShown=!1},T.prototype.search=function(){this.oPageSwitcher.setPage(1,g.EntitiesPerPage),this.requestEntities()},T.prototype.clearSearch=function(){this.newSearchValue(""),this.requestEntities()},T.prototype.initFilters=function(){s.each(this.oEntityData.Filters,function(t){var e={list:n.computed((function(){var e=[];return s.isFunction(t.mList)?(e=t.mList(),s.isArray(e)||(e=[])):s.isArray(t.mList)&&(e=t.mList),e.length>0&&(t.sAllText&&e.unshift({text:t.sAllText,value:-1}),t.sNotInAnyText&&e.push({text:t.sNotInAnyText,value:0})),e}),this),selectedValue:n.observable(-1),requestValue:n.observable(-1),sAllText:t.sAllText,sFileld:t.sField,sEntity:t.sEntity};e.selectedValue.subscribe((function(){e.sEntity?this.fChangeEntityHandler(e.sEntity,e.selectedValue()):e.requestValue(e.selectedValue())}),this),e.requestValue.subscribe((function(){this.requestEntities()}),this),this.aFilters.push(e)}.bind(this))},T.prototype.initAdditionalButtons=function(){s.each(this.oEntityData.AdditionalButtons,function(t){t&&t.ButtonView&&(s.isFunction(t.ButtonView.init)&&t.ButtonView.init(this.hasCheckedEntities,this.checkedEntities),this.aAdditionalButtons.push(t))}.bind(this))},T.prototype.requestEntities=function(){if(this.bShown&&("Tenant"===this.sType||r.isPositiveNumber(S.selectedTenantId()))){var t=this.sType,e={TenantId:S.selectedTenantId(),Type:t,Offset:(this.oPageSwitcher.currentPage()-1)*g.EntitiesPerPage,Limit:g.EntitiesPerPage,Search:this.newSearchValue()};s.each(this.aFilters,(function(t){e[t.sFileld]=t.requestValue()})),this.searchValue(this.newSearchValue()),this.loading(!0),this.errorMessage(""),u.send(this.oEntityData.ServerModuleName,this.oEntityData.GetListRequest,e,(function(e){if(this.loading(!1),e.Result){var i=s.isArray(e.Result.Items)?e.Result.Items:[],o=[],a=r.pInt(e.Result.Count);s.each(i,(function(e){e&&e.Id&&(e.Id=r.pInt(e.Id),e.bItsMe="Tenant"===t&&e.Id===c.getTenantId()||"User"===t&&e.Id===c.getUserId(),e.checked=n.observable(!1),e.trottleChecked=function(t,e){e.stopPropagation(),this.bItsMe||this.checked(!this.checked())},o.push(e))})),this.entities(o),this.totalEntitiesCount(a),0===this.entities().length?this.fChangeEntityHandler(t,void 0,"create"):0!==this.justCreatedId()&&this.fChangeEntityHandler(t,this.justCreatedId()),this.aIdListDeleteProcess=[]}else r.isNonEmptyString(e.ErrorMessage)?this.errorMessage(e.ErrorMessage):h.showErrorByCode(e),this.entities([])}),this)}},T.prototype.setChangeEntityHandler=function(t){this.fChangeEntityHandler=t},T.prototype.changeEntity=function(t,e){s.each(this.aFilters,function(t){e[t.sEntity]?(t.selectedValue(e[t.sEntity]),t.requestValue(e[t.sEntity])):-1===t.requestValue()&&0===t.requestValue()||(-1===t.selectedValue()||0===t.selectedValue()?t.requestValue(t.selectedValue()):(t.selectedValue(-1),t.requestValue(-1)))}.bind(this)),this.current(r.pInt(t)),this.justCreatedId(0)},T.prototype.openCreateForm=function(){this.showCreateForm(!0),this.oEntityCreateView.clearFields()},T.prototype.cancelCreatingEntity=function(){this.showCreateForm(!1)},T.prototype.createEntity=function(){if(this.oEntityCreateView&&("Tenant"===this.sType||r.isPositiveNumber(S.selectedTenantId()))&&(!s.isFunction(this.oEntityCreateView.isValidSaveData)||this.oEntityCreateView.isValidSaveData())){var t=this.oEntityCreateView.getParametersForSave();t.TenantId=S.selectedTenantId(),this.isCreating(!0),u.send(this.oEntityData.ServerModuleName,this.oEntityData.CreateRequest,t,(function(t){t.Result?(l.showReport(this.oEntityData.ReportSuccessCreateText),this.justCreatedId(r.pInt(t.Result)),this.oEntityCreateView.updateSavedState(),this.cancelCreatingEntity()):h.showErrorByCode(t,this.oEntityData.ErrorCreateText),this.requestEntities(),this.isCreating(!1)}),this),this.oEntityCreateView.clearFields()}},T.prototype.deleteCurrentEntity=function(){this.deleteEntities([this.current()])},T.prototype.deleteCheckedEntities=function(){var t=s.map(this.checkedEntities(),(function(t){return t.Id}));this.deleteEntities(t)},T.prototype.deleteEntities=function(t){if(this.oEntityData.DeleteRequest&&(r.isNonEmptyArray(this.aIdListDeleteProcess)?(t=s.difference(t,this.aIdListDeleteProcess),this.aIdListDeleteProcess=s.union(t,this.aIdListDeleteProcess)):this.aIdListDeleteProcess=t,t.length>0)){var e="",i=1===t.length?s.find(this.entities(),(function(e){return e.Id===t[0]})):null,n={Type:this.sType,Count:t.length,ConfirmText:o.i18n(this.oEntityData.ConfirmDeleteLangConst,{},null,t.length)};i&&(e=i.Name||i.PublicId),c.broadcastEvent("ConfirmDeleteEntity::before",n),d.showPopup(E,[n.ConfirmText,s.bind(this.confirmedDeleteEntities,this,t),e,o.i18n("COREWEBCLIENT/ACTION_DELETE")])}},T.prototype.confirmedDeleteEntities=function(t,e){if(e&&r.isPositiveNumber(S.selectedTenantId())){var i={TenantId:S.selectedTenantId(),Type:this.sType,IdList:t,DeletionConfirmedByAdmin:!0};u.send(this.oEntityData.ServerModuleName,this.oEntityData.DeleteRequest,i,(function(e){e.Result?l.showReport(o.i18n(this.oEntityData.ReportSuccessDeleteLangConst,{},null,t.length)):l.showError(o.i18n(this.oEntityData.ErrorDeleteLangConst,{},null,t.length)),this.requestEntities()}),this)}else this.aIdListDeleteProcess=[]},T.prototype.groupCheck=function(){var t=!this.hasCheckedEntities();s.each(this.entities(),(function(e){e.bItsMe||e.checked(t)}))},t.exports=T},pvQt:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("AFLV"),r=i("o0Bx"),a=i("IAk5"),u=i("hPb3"),h=i("61ci");function c(){this.tenants=n.observableArray([]),this.selectedTenantId=n.observable(0),this.selectedTenant=n.computed((function(){return s.find(this.tenants(),function(t){return t.Id===this.selectedTenantId()}.bind(this))||{Name:""}}),this),u.dbSettingsChanged.subscribe((function(){u.dbSettingsChanged()&&r.send(h.ServerModuleName,"GetTenants")}))}c.prototype.init=function(t){a.subscribeEvent("ReceiveAjaxResponse::after",this.onAjaxResponse.bind(this));var e=t.AdminPanelWebclient;this.parseTenants(e?e.Tenants:[])},c.prototype.onAjaxResponse=function(t){if(t.Response.Module===h.ServerModuleName&&"CreateTables"===t.Response.Method&&r.send(h.ServerModuleName,"GetTenants"),t.Response.Module===h.ServerModuleName&&"GetTenants"===t.Response.Method){var e=o.pString(t.Request.Parameters.Search),i=o.pInt(t.Request.Parameters.Offset);""===e&&0===i&&this.parseTenants(t.Response.Result)}},c.prototype.setSelectedTenant=function(t){s.find(this.tenants(),(function(e){return e.Id===t}))&&this.selectedTenantId(t)},c.prototype.parseTenants=function(t){var e=this.selectedTenantId(),i=!1,n=t&&s.isArray(t.Items)?t.Items:[],r=[];s.each(n,(function(t){var s={Name:t.Name,Id:o.pInt(t.Id)};s.Id===e&&(i=!0),r.push(s)})),i||this.selectedTenantId(r.length>0?r[0].Id:0),this.tenants(r)},t.exports=new c},qdYY:function(t,e,i){"use strict";var s=i("F/us"),n=i("EVdn"),o=i("0h2I"),r=i("RN+F"),a=i("IAk5"),u=i("SQrT"),h=i("61ci");function c(){this.id=o.observable(0),this.publicId=o.observable(""),this.bAllowMakeTenant=h.EnableMultiTenant&&a.getUserRole()===Enums.UserRole.SuperAdmin,this.tenantAdminSelected=o.observable(!1),this.writeSeparateLog=o.observable(!1),this.sHeading=r.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_USER"),this.sActionCreate=r.i18n("COREWEBCLIENT/ACTION_CREATE"),this.sActionCreateInProgress=r.i18n("COREWEBCLIENT/ACTION_CREATE_IN_PROGRESS"),a.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}c.prototype.ViewTemplate="AdminPanelWebclient_EditUserView",c.prototype.ViewConstructorName="CEditUserView",c.prototype.getCurrentValues=function(){return[this.id(),this.publicId(),this.tenantAdminSelected(),this.writeSeparateLog()]},c.prototype.clearFields=function(){this.id(0),this.publicId(""),this.tenantAdminSelected(!1),this.writeSeparateLog(!1)},c.prototype.parse=function(t,e){e?(this.id(t),this.publicId(e.PublicId),this.tenantAdminSelected(e.Role===Enums.UserRole.TenantAdmin),this.writeSeparateLog(!!e.WriteSeparateLog)):this.clearFields()},c.prototype.isValidSaveData=function(){var t=""!==n.trim(this.publicId());return t||u.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_USER_NAME_EMPTY")),t},c.prototype.getParametersForSave=function(){return{UserId:this.id(),PublicId:n.trim(this.publicId()),Role:this.tenantAdminSelected()?Enums.UserRole.TenantAdmin:Enums.UserRole.NormalUser,WriteSeparateLog:this.writeSeparateLog()}},c.prototype.saveEntity=function(t,e){s.each(t,(function(t){s.isFunction(t.createEntity)?t.createEntity():s.isFunction(t.save)&&t.save(e)}))},t.exports=new c},sJNY:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("AFLV");t.exports={ServerModuleName:"Facebook",HashModuleName:"facebook",Connected:!1,EnableModule:!1,Id:"",Secret:"",Scopes:[],init:function(t){var e=t.Facebook;s.isEmpty(e)||(this.Connected=o.pBool(e.Connected,this.Connected),this.EnableModule=o.pBool(e.EnableModule,this.EnableModule),this.Id=o.pString(e.Id,this.Id),this.Secret=o.pString(e.Secret,this.Secret),this.Scopes=o.pArray(e.Scopes,this.Scopes))},getScopesCopy:function(){var t=[];return s.each(this.Scopes,(function(e){t.push({Description:e.Description,Name:e.Name,Value:n.observable(e.Value)})})),t},updateScopes:function(t,e){var i=[];s.each(e,(function(t){i.push({Description:t.Description,Name:t.Name,Value:t.Value()})})),this.Connected=t,this.Scopes=i},updateAdmin:function(t,e,i,s){this.EnableModule=t,this.Id=e,this.Secret=i,this.Scopes=s}}},"u+3T":function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("o0Bx"),r=i("OgeD"),a=i("AFLV"),u=r.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i("iIt5");function c(){u.call(this,h.ServerModuleName),this.loginLogo=n.observable(h.LoginLogo),this.tabsbarLogo=n.observable(h.TabsbarLogo)}s.extendOwn(c.prototype,u.prototype),c.prototype.ViewTemplate="BrandingWebclient_AdminSettingsView",c.prototype.getCurrentValues=function(){return[this.loginLogo(),this.tabsbarLogo()]},c.prototype.revertGlobalValues=function(){this.loginLogo(h.LoginLogo),this.tabsbarLogo(h.TabsbarLogo)},c.prototype.getParametersForSave=function(){return{LoginLogo:this.loginLogo(),TabsbarLogo:this.tabsbarLogo()}},c.prototype.applySavedValues=function(t){a.isPositiveNumber(this.iTenantId)||h.update(t)},c.prototype.setAccessLevel=function(t,e){this.visible(""===t||"Tenant"===t),this.iTenantId=e},c.prototype.onRouteChild=function(t){this.requestPerTenantSettings()},c.prototype.requestPerTenantSettings=function(){a.isPositiveNumber(this.iTenantId)?(this.loginLogo(""),this.tabsbarLogo(""),o.send(h.ServerModuleName,"GetSettings",{TenantId:this.iTenantId},(function(t){t.Result&&(this.loginLogo(t.Result.LoginLogo),this.tabsbarLogo(t.Result.TabsbarLogo),this.updateSavedState())}),this)):this.revertGlobalValues()},t.exports=new c},"uN/E":function(t,e,i){var s,n=n||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,i=function(){return t.URL||t.webkitURL||t},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,o=/constructor/i.test(t.HTMLElement)||t.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},u=function(t){setTimeout((function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()}),4e4)},h=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},c=function(e,c,l){l||(e=h(e));var p,d=this,E="application/octet-stream"===e.type,S=function(){!function(t,e,i){for(var s=(e=[].concat(e)).length;s--;){var n=t["on"+e[s]];if("function"==typeof n)try{n.call(t,i||t)}catch(t){a(t)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,n)return p=i().createObjectURL(e),void setTimeout((function(){var t,e;s.href=p,s.download=c,t=s,e=new MouseEvent("click"),t.dispatchEvent(e),S(),u(p),d.readyState=d.DONE}));!function(){if((r||E&&o)&&t.FileReader){var s=new FileReader;return s.onloadend=function(){var e=r?s.result:s.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,d.readyState=d.DONE,S()},s.readAsDataURL(e),void(d.readyState=d.INIT)}(p||(p=i().createObjectURL(e)),E)?t.location.href=p:t.open(p,"_blank")||(t.location.href=p);d.readyState=d.DONE,S(),u(p)}()},l=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return e=e||t.name||"download",i||(t=h(t)),navigator.msSaveOrOpenBlob(t,e)}:(l.abort=function(){},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null,function(t,e,i){return new c(t,e||t.name||"download",i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=n:null!==i("B9Yq")&&null!==i("PDX0")&&(void 0===(s=function(){return n}.call(e,i,e,t))||(t.exports=s))},uvLD:function(t,e,i){"use strict";var s,n=i("F/us"),o=i("EVdn"),r=i("0h2I"),a=i("RN+F"),u=i("76Kh"),h=i("20Ah"),c=i("JFZZ"),l=i("IAk5"),p=i("OgeD"),d=i("SQrT"),E=i("hPb3"),S=i("SBlY"),b=i("7vIj");function g(){s.call(this,E.ServerModuleName),this.sFakePass="xxxxxxxx",this.iUserId=l.getUserId(),this.accounts=r.observableArray([]),this.currentAccountId=r.observable(0),this.createAccountHeading=r.computed((function(){return 0===this.accounts().length?a.i18n("STANDARDAUTHWEBCLIENT/HEADING_CREATE_FIRST_ACCOUNT"):0===this.currentAccountId()?a.i18n("STANDARDAUTHWEBCLIENT/HEADING_CREATE_NEW_ACCOUNT"):a.i18n("STANDARDAUTHWEBCLIENT/HEADING_EDIT_NEW_ACCOUNT")}),this),this.updateButtonText=r.computed((function(){return 0===this.currentAccountId()?a.i18n("STANDARDAUTHWEBCLIENT/ACTION_CREATE"):a.i18n("STANDARDAUTHWEBCLIENT/ACTION_UPDATE")}),this),this.updateProgressButtonText=r.computed((function(){return 0===this.currentAccountId()?a.i18n("STANDARDAUTHWEBCLIENT/ACTION_CREATE_IN_PROGRESS"):a.i18n("STANDARDAUTHWEBCLIENT/ACTION_UPDATE_IN_PROGRESS")}),this),this.sUserPublicId="",this.login=r.observable(""),this.loginFocus=r.observable(!1),this.pass=r.observable(""),this.passFocus=r.observable(!1),this.confirmPass=r.observable(""),this.confirmPassFocus=r.observable(!1),this.visibleCreateForm=r.observable(!1),this.isCreating=r.observable(!1),l.isUserNormalOrTenant()&&(this.requestAccounts(),r.computed((function(){this.visible(this.accounts().length>0)}),this)),l.subscribeEvent(b.ServerModuleName+"::CreateUserAuthAccount",n.bind((function(t){S.send("CreateAuthenticatedUserAccount",{Login:t.Login,Password:t.Password},n.bind((function(e){e.Result?(this.accounts.push({id:e.Result.EntityId,login:t.Login}),l.broadcastEvent("OpenSettingTab",{Name:this.SettingsTabName})):c.showErrorByCode(e)}),this))}),this)),l.subscribeEvent("ReceiveAjaxResponse::after",n.bind((function(t){"Core"===t.Request.Module&&"GetUser"===t.Request.Method&&t.Response.Result&&t.Request.Parameters.Id===this.iUserId&&(this.sUserPublicId=t.Response.Result.PublicId,this.login(this.sUserPublicId))}),this)),l.broadcastEvent("StandardAuthWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}s=l.getUserRole()===Enums.UserRole.SuperAdmin?p.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"):p.run("SettingsWebclient","getAbstractSettingsFormViewClass"),n.extendOwn(g.prototype,s.prototype),g.prototype.ViewTemplate="StandardAuthWebclient_StandardAccountsSettingsFormView",g.prototype.ViewConstructorName="CStandardAccountsSettingsFormView",g.prototype.onShow=function(){this.requestAccounts(),l.broadcastEvent("CStandardAccountsSettingsFormView::onShow::after",{Name:this.ViewConstructorName,View:this})},g.prototype.onRouteChild=g.prototype.onShow,g.prototype.requestAccounts=function(){S.send("GetUserAccounts",{UserId:this.iUserId},(function(t){n.isArray(t.Result)?this.accounts(t.Result):(c.showErrorByCode(t),this.accounts([])),0===this.accounts().length?this.openEditAccountForm(0):this.openEditAccountForm(this.accounts()[0].id)}),this)},g.prototype.setAccessLevel=function(t,e){this.visible("User"===t),this.iUserId!==e&&(this.accounts([]),this.hideEditAccountForm(),this.iUserId=e||-1,this.sUserPublicId="")},g.prototype.confirmAccountDeleting=function(t,e){u.showPopup(h,[a.i18n("STANDARDAUTHWEBCLIENT/CONFIRM_DELETE_ACCOUNT"),n.bind(this.deleteAccount,this,t),e])},g.prototype.deleteAccount=function(t,e){e&&S.send("DeleteAccount",{AccountId:t},(function(t){t.Result?d.showReport(a.i18n("STANDARDAUTHWEBCLIENT/REPORT_DELETE_ACCOUNT")):c.showErrorByCode(t,a.i18n("STANDARDAUTHWEBCLIENT/ERROR_DELETE_ACCOUNT")),this.requestAccounts()}),this)},g.prototype.openEditAccountForm=function(t){var e=n.find(this.accounts(),(function(e){return e.id===t}));e?(this.currentAccountId(t),this.login(e.login),this.pass(this.sFakePass),this.passFocus(!0),this.confirmPass("")):(this.currentAccountId(0),this.login(this.sUserPublicId),this.loginFocus(!0),this.pass(""),this.confirmPass("")),this.visibleCreateForm(!0)},g.prototype.saveAccount=function(){var t=o.trim(this.login()),e=o.trim(this.pass());""===t?this.loginFocus(!0):""===e||e===this.sFakePass?this.passFocus(!0):e!==o.trim(this.confirmPass())?(d.showError(a.i18n("COREWEBCLIENT/ERROR_PASSWORDS_DO_NOT_MATCH")),this.confirmPassFocus(!0)):0===this.currentAccountId()?S.send("CreateAuthenticatedUserAccount",{Login:t,Password:e},(function(t){t.Result?(d.showReport(a.i18n("STANDARDAUTHWEBCLIENT/REPORT_CREATE_ACCOUNT")),this.hideEditAccountForm(),this.requestAccounts()):c.showErrorByCode(t,a.i18n("STANDARDAUTHWEBCLIENT/ERROR_CREATE_ACCOUNT"))}),this):S.send("UpdateAccount",{AccountId:this.currentAccountId(),Password:e},(function(t){t.Result?(d.showReport(a.i18n("STANDARDAUTHWEBCLIENT/REPORT_UPDATE_ACCOUNT")),this.hideEditAccountForm()):c.showErrorByCode(t,a.i18n("STANDARDAUTHWEBCLIENT/ERROR_UPDATE_ACCOUNT")),this.requestAccounts()}),this)},g.prototype.hideEditAccountForm=function(){this.currentAccountId(0),this.visibleCreateForm(!1)},t.exports=new g},vF2m:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("AFLV");t.exports={ServerModuleName:"Google",HashModuleName:"google",Connected:!1,EnableModule:!1,Id:"",Secret:"",Key:"",Scopes:[],init:function(t){var e=s.extend({},t[this.ServerModuleName]||{},t.Google||{});s.isEmpty(e)||(this.Connected=o.pBool(e.Connected,this.Connected),this.EnableModule=o.pBool(e.EnableModule,this.EnableModule),this.Id=o.pString(e.Id,this.Id),this.Secret=o.pString(e.Secret,this.Secret),this.Key=o.pString(e.Key,this.Key),this.Scopes=o.pArray(e.Scopes,this.Scopes))},getScopesCopy:function(){var t=[];return s.each(this.Scopes,(function(e){t.push({Description:e.Description,Name:e.Name,Value:n.observable(e.Value)})})),t},updateScopes:function(t,e){var i=[];s.each(e,(function(t){i.push({Description:t.Description,Name:t.Name,Value:t.Value()})})),this.Connected=t,this.Scopes=i},updateAdmin:function(t,e,i,s,n){this.EnableModule=t,this.Id=e,this.Secret=i,this.Key=s,this.Scopes=n}}},w5n9:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("RN+F"),r=i("OgeD"),a=i("SQrT"),u=r.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i("6ZXr");function c(){u.call(this,h.ServerModuleName),this.enable=n.observable(h.EnableModule),this.id=n.observable(h.Id),this.secret=n.observable(h.Secret),this.scopes=n.observable(h.getScopesCopy())}s.extendOwn(c.prototype,u.prototype),c.prototype.ViewTemplate="Dropbox_AdminSettingsView",c.prototype.getCurrentValues=function(){var t=s.map(this.scopes(),(function(t){return t.Name+t.Value()}));return[this.enable(),this.id(),this.secret(),t]},c.prototype.revertGlobalValues=function(){this.enable(h.EnableModule),this.id(h.Id),this.secret(h.Secret),this.scopes(h.getScopesCopy())},c.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()||(a.showError(o.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},c.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Scopes:s.map(this.scopes(),(function(t){return{Name:t.Name,Description:t.Description,Value:t.Value()}}))}},c.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableModule,t.Id,t.Secret,t.Scopes)},c.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new c},yF5f:function(t,e,i){"use strict";(function(e){var s=i("F/us"),n=i("0h2I"),o=i("RN+F"),r=i("AFLV"),a=i("SQrT");function u(t,e){switch(t.FieldType){case"bool":return r.pBool(e);case"int":return r.pInt(e);default:return r.pString(e)}}function h(){var t,e;this.id=n.observable(0),this.name=n.observable(""),this.description=n.observable(""),this.webDomain=n.observable(""),this.siteName=n.observable(""),this.sHeading=o.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_TENANT"),this.sActionCreate=o.i18n("COREWEBCLIENT/ACTION_CREATE"),this.sActionCreateInProgress=o.i18n("COREWEBCLIENT/ACTION_CREATE_IN_PROGRESS"),this.aAdditionalFields=(t="Tenant",e=r.pArray(window.auroraAppData&&window.auroraAppData.additional_entity_fields_to_edit),s.filter(e,(function(e){return e.value=n.observable(u(e,"")),e.Entity===t})))}h.prototype.ViewTemplate="AdminPanelWebclient_EditTenantView",h.prototype.getCurrentValues=function(){var t=[this.id(),this.name(),this.description(),this.webDomain(),this.siteName()];return s.each(this.aAdditionalFields,(function(e){t.push(e.value())})),t},h.prototype.clearFields=function(){this.id(0),this.name(""),this.description(""),this.webDomain(""),this.siteName(""),s.each(this.aAdditionalFields,(function(t){t.value(u(t,""))}))},h.prototype.parse=function(t,e){e?(this.id(t),this.name(e.Name),this.description(e.Description),this.webDomain(e.WebDomain),this.siteName(e.SiteName),s.each(this.aAdditionalFields,(function(t){t.value(u(t,e[t.FieldName])),t.EnableOnCreate=r.pBool(t.EnableOnCreate,!0),t.EnableOnEdit=r.pBool(t.EnableOnEdit,!0)}))):this.clearFields()},h.prototype.isValidSaveData=function(){return""===e.trim(this.name())?(a.showError(o.i18n("ADMINPANELWEBCLIENT/ERROR_TENANT_NAME_EMPTY")),!1):!/[\\\/\:\*\?\\\"\<\>\|]/gi.test(this.name())||(a.showError(o.i18n("ADMINPANELWEBCLIENT/ERROR_TENANT_NAME_INVALID")),!1)},h.prototype.getParametersForSave=function(){var t={TenantId:this.id(),Name:this.name(),Description:this.description(),WebDomain:this.webDomain(),SiteName:this.siteName()};return s.each(this.aAdditionalFields,(function(e){var i=e.value();"int"===e.FieldType&&(i=r.pInt(i)),t[e.FieldName]=i})),t},t.exports=new h}).call(this,i("EVdn"))},yYIs:function(t,e,i){"use strict";var s=i("F/us"),n=i("0h2I"),o=i("RN+F"),r=i("o0Bx"),a=i("JFZZ"),u=i("SQrT"),h=i("76Kh"),c=i("20Ah");function l(t,e){this.sServerModule=t||"Core",this.sUpdateSettingsMethod=e||"UpdateSettings",this.isSaving=n.observable(!1),this.visible=n.observable(!0),this.sSavedState="",this.bShown=!1,this.aSettingsSections=[]}l.prototype.ViewTemplate="",l.prototype.addSettingsSection=function(t){this.aSettingsSections.push(t)},l.prototype.onRoute=function(t){var e=!this.bShown;this.bShown=!0,e&&s.isFunction(this.onShow)&&this.onShow(),this.revert(),s.isFunction(this.onRouteChild)&&this.onRouteChild(t),s.each(this.aSettingsSections,(function(e){s.isFunction(e.onShow)&&e.onShow(t)}))},l.prototype.hide=function(t,e){var i=this.getCurrentState()!==this.sSavedState;s.each(this.aSettingsSections,(function(t){s.isFunction(t.getCurrentState)&&(i=i||t.getCurrentState()!==t.sSavedState)})),i?h.showPopup(c,[o.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),s.bind((function(i){i?(this.bShown=!1,t(),this.revert()):s.isFunction(e)&&e()}),this)]):(this.bShown=!1,t())},l.prototype.getCurrentValues=function(){return[]},l.prototype.getCurrentState=function(){return this.getCurrentValues().join(":")},l.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},l.prototype.revertGlobalValues=function(){},l.prototype.revert=function(){s.each(this.aSettingsSections,(function(t){s.isFunction(t.revert)&&t.revert()})),this.revertGlobalValues(),this.updateSavedState()},l.prototype.getParametersForSave=function(){return{}},l.prototype.save=function(){s.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),r.send(this.sServerModule,this.sUpdateSettingsMethod,this.getParametersForSave(),this.onResponse,this))},l.prototype.applySavedValues=function(t){},l.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.updateSavedState(),this.applySavedValues(i),u.showReport(o.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else a.showErrorByCode(t,o.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},l.prototype.setAccessLevel=function(t,e){},t.exports=l}}]);