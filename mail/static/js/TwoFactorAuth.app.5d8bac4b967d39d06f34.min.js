(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"2xdY":function(t,o,s){"use strict";var e=s("F/us"),i=s("0h2I"),n=s("SQrT"),r=s("RN+F"),h=s("czxF"),a=s("o0Bx");function p(){h.call(this),this.onConfirm=null,this.password=i.observable(""),this.inPropgress=i.observable(!1),this.action=""}e.extendOwn(p.prototype,h.prototype),p.prototype.PopupTemplate="TwoFactorAuth_ConfirmPasswordPopup",p.prototype.onOpen=function(t,o){this.onConfirm=t,this.action=o},p.prototype.verifyPassword=function(){this.inPropgress(!0),a.send("TwoFactorAuth",this.action,{Password:this.password()},this.onGetVerifyResponse,this)},p.prototype.onGetVerifyResponse=function(t){t.Result?(e.isFunction(this.onConfirm)&&this.onConfirm(t),this.closePopup(),this.password("")):n.showError(r.i18n("TWOFACTORAUTH/ERROR_WRONG_PASSWORD")),this.inPropgress(!1)},t.exports=new p},"7Lti":function(t,o,s){"use strict";var e=s("0h2I"),i=s("F/us"),n=s("AFLV");t.exports={ServerModuleName:"TwoFactorAuth",HashModuleName:"two-factor-auth",EnableTwoFactorAuth:e.observable(!0),init:function(t){var o=i.extend({},t[this.ServerModuleName]||{},t.TwoFactorAuth||{});i.isEmpty(o)||this.EnableTwoFactorAuth(n.pBool(o.EnableTwoFactorAuth,this.EnableTwoFactorAuth()))}}},PMya:function(t,o,s){"use strict";var e=s("F/us"),i=s("0h2I"),n=s("SQrT"),r=s("RN+F"),h=s("OgeD").run("SettingsWebclient","getAbstractSettingsFormViewClass"),a=s("7Lti"),p=s("76Kh"),c=s("2xdY"),u=s("o0Bx");function l(){h.call(this,a.ServerModuleName),this.isEnabledTwoFactorAuth=i.observable(a.EnableTwoFactorAuth()),this.isPasswordVerified=i.observable(!1),this.isShowSecret=i.observable(!1),this.isValidatingPin=i.observable(!1),this.QRCodeSrc=i.observable(""),this.secret=i.observable(""),this.pin=i.observable("")}e.extendOwn(l.prototype,h.prototype),l.prototype.ViewTemplate="TwoFactorAuth_TwoFactorAuthSettingsFormView",l.prototype.confirmePassword=function(){p.showPopup(c,[e.bind(this.onConfirmePassword,this),"EnableTwoFactorAuth"])},l.prototype.onConfirmePassword=function(t){t&&t.Result&&t.Result.Secret&&t.Result.QRcode&&(this.QRCodeSrc(t.Result.QRcode),this.secret(t.Result.Secret),this.isShowSecret(!0))},l.prototype.validatePin=function(){this.isValidatingPin(!0),u.send("TwoFactorAuth","TwoFactorAuthSave",{Pin:this.pin(),Secret:this.secret()},this.onValidatingPinResponse,this)},l.prototype.onValidatingPinResponse=function(t){this.isValidatingPin(!1),t&&t.Result?(this.QRCodeSrc(""),this.secret(""),this.pin(""),this.isShowSecret(!1),this.isEnabledTwoFactorAuth(!0)):n.showError(r.i18n("TWOFACTORAUTH/ERROR_WRONG_PIN"))},l.prototype.disable=function(){p.showPopup(c,[e.bind((function(){this.QRCodeSrc(""),this.secret(""),this.pin(""),this.isShowSecret(!1),this.isEnabledTwoFactorAuth(!1)}),this),"DisableTwoFactorAuth"])},t.exports=new l},Rr39:function(t,o,s){"use strict";var e=s("F/us"),i=s("IAk5"),n=s("RN+F"),r=s("7Lti");t.exports=function(t){return r.init(t),{start:function(t){t.run("SettingsWebclient","registerSettingsTab",[function(){return s("PMya")},r.HashModuleName,n.i18n("TWOFACTORAUTH/LABEL_SETTINGS_TAB")]),i.subscribeEvent("StandardLoginFormWebclient::ConstructView::after",(function(t){var o=t.View,i=s("76Kh"),n=s("YI4A");if(o){var r=o.onSystemLoginResponse.bind(o);e.isFunction(r)||(r=o.onSystemLoginResponseBase.bind(o)),e.isFunction(r)||(r=function(){}),o.onSystemLoginResponse=function(t,o){t.Result&&t.Result.TwoFactorAuth&&t.Result.TwoFactorAuth.UserId?i.showPopup(n,[e.bind(this.onSystemLoginResponseBase,this),e.bind((function(){this.loading(!1)}),this),t.Result.TwoFactorAuth.UserId]):r(t,o)}}}))}}}},YI4A:function(t,o,s){"use strict";var e=s("F/us"),i=s("0h2I"),n=s("SQrT"),r=s("RN+F"),h=s("czxF"),a=s("o0Bx"),p=s("IAk5");function c(){h.call(this),this.onConfirm=null,this.onCancel=null,this.pin=i.observable(""),this.inPropgress=i.observable(!1),this.UserId=null,this.pinFocused=i.observable(!1),this.isMobile=i.observable(p.isMobile()||!1)}e.extendOwn(c.prototype,h.prototype),c.prototype.PopupTemplate="TwoFactorAuth_VerifyTokenPopup",c.prototype.onOpen=function(t,o,s){this.onConfirm=t,this.onCancel=o,this.UserId=s,this.pinFocused(!0)},c.prototype.verifyPin=function(){this.inPropgress(!0),a.send("TwoFactorAuth","VerifyPin",{Pin:this.pin(),UserId:this.UserId},this.onGetVerifyResponse,this)},c.prototype.onGetVerifyResponse=function(t){t.Result?(e.isFunction(this.onConfirm)&&this.onConfirm(t),this.closePopup(),this.pin("")):(n.showError(r.i18n("TWOFACTORAUTH/ERROR_WRONG_PIN")),this.pin("")),this.inPropgress(!1)},c.prototype.cancelPopup=function(){e.isFunction(this.onCancel)&&this.onCancel(!1),this.closePopup()},t.exports=new c}}]);